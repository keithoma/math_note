\documentclass{book}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}

% page layout
\usepackage{geometry}
    \geometry{
        a4paper,
        total={170mm,257mm},
        left=20mm,
        top=20mm,
    }

\usepackage{amsthm}

\theoremstyle{plain}
\newtheorem{thm}{Theorem}[chapter] % reset theorem numbering for each chapter
\newtheorem{lmm}{Lemma}
\newtheorem{prps}{prps}

\theoremstyle{definition}
\newtheorem{exmp}[thm]{Example} % same for example numbers
\newtheorem{exr}[thm]{Exercise}

\newtheoremstyle{custom_definition}% name of the style to be used
  {\topsep} % measure of space to leave above the theorem. E.g.: 3pt
  {\topsep} % measure of space to leave below the theorem. E.g.: 3pt
  {\normalfont} % name of font to use in the body of the theorem
  {} % measure of space to indent
  {\bfseries} % name of head font
  {.\newline} % punctuation between head and body
  {\topsep}% space after theorem head; " " = normal interword space
  {\thmname{#1}\thmnumber{ #2} --- \thmnote{#3}} % Manually specify head

\theoremstyle{custom_definition}
\newtheorem{defn}[thm]{Definition} 

\usepackage{amssymb}
\usepackage{amsmath}

%%%%%
\newcommand{\set}[1]{\left\{\, #1 \,\right\}}
\newcommand{\makeset}[2]{\left\{\, #1 \mathrel{\Big|} #2 \,\right\}}

\newcommand{\bigslant}[2]{{\raisebox{.2em}{$#1$}\left/\raisebox{-.2em}{$#2$}\right.}}


\begin{document}
%
%
%
\chapter{Commutative Rings}

Definitions
\begin{enumerate}
  \item prime, coprime, relatively prime, irreducible
\end{enumerate}


\begin{exr}
  Let \(\varphi: A \longrightarrow B\) be a ring homomorphism, \(\mathfrak{a}_1, \mathfrak{a}_2, \mathfrak{a}_3\) ideals in \(A\), and \(\mathfrak{b}_1, \mathfrak{b}_2, \mathfrak{b}_3\) ideals of \(B\). Prove the following statements.
  \begin{enumerate}
    \item \((\mathfrak{a}_1 + \mathfrak{a}_2)^e = (\mathfrak{a}_1)^e + (\mathfrak{a}_2)^e\).
    \begin{proof}
      We show \((\mathfrak{a}_1 + \mathfrak{a}_2)^e \subseteq (\mathfrak{a}_1)^e + (\mathfrak{a}_2)^e\). Let \(x \in (\mathfrak{a}_1 + \mathfrak{b}_2)^e\), then we have for some index set \(I\)
      \begin{equation}
        x = \sum_{i \in I} \lambda_i x_i \text{,}
      \end{equation}
      where \(\lambda_i \in B\) and \(x_i \in \varphi(\mathfrak{a}_1 + \mathfrak{a}_2)\) for all \(i \in I\). For each \(i \in I\) it is \(x_i = \varphi(\mu_{i, 1} a_{i, 1} + \mu_{i, 2} a_{i, 2})\), hence
      \begin{align}
        x =& \sum_{i \in I} \lambda_i \varphi(\mu_{i, 1} a_{i, 1} + \mu_{i, 2} a_{i, 2}) &  \\
        =& \sum_{i \in I} \lambda_i \left( \varphi(\mu_{i, 1} a_{i, 1}) + \varphi(\mu_{i, 2} a_{i, 2}) \right)&\text{(by linearity)} \\
        =& \sum_{i \in I} \lambda_i \left( \mu_{i, 1} \varphi( a_{i, 1}) + \mu_{i, 2} \varphi( a_{i, 2}) \right)&\text{(by linearity)} \\
        =& \sum_{i \in I} \lambda_i \mu_{i, 1}\varphi( a_{i, 1}) + \lambda_i \mu_{i, 2}\varphi( a_{i, 2}) & \text{(by distributivity)} \\
        =& \sum_{i \in I} \lambda_i \mu_{i, 1} \varphi( a_{i, 1}) + \sum_{i \in I} \lambda_i \mu_{i, 2} \varphi( a_{i, 2}) & \text{(reordering the sum)} \text{.} \\
      \end{align}
      The last term is exactly the elements expressed by \(\mathfrak{a}_1^e + \mathfrak{a}_2^e\), therefore, \((\mathfrak{a}_1 + \mathfrak{a}_2)^e \subseteq (\mathfrak{a}_1)^e + (\mathfrak{a}_2)^e\).

      I think the above proof should work into both directions.
    \end{proof}
    \item \((\mathfrak{b}_1 + \mathfrak{b}_2)^c \supseteq \mathfrak{b}_1^c + \mathfrak{b}_2^c\)
    \begin{proof}
      We have
      \begin{equation}
        (\mathfrak{b}_1 + \mathfrak{b}_2)^c = \makeset{x \in A}{\exists \, b_1 \in \mathfrak{b}_1 \exists \, b_2 \in \mathfrak{b}_2 : \varphi(x) = b_1 + b_2} \text{.}
      \end{equation}
      Now let \(x \in \mathfrak{b}_1^c + \mathfrak{b}_2^c\), then \(x = a_1 + a_2\) where \(\varphi(a_1) \in \mathfrak{b}_1\) and \(\varphi(a_2) \in \mathfrak{b}_2\). It is
      \begin{align}
        \varphi(x) =& \varphi(a_1 + a_2) & \\
        =& \varphi(a_1) + \varphi(a_2) & \text{(by additivity)}
      \end{align}
      Since \(\varphi(a_1) \in \mathfrak{b}_1\) and \(\varphi(a_2) \in \mathfrak{b}_2\) we have that \(x \in (\mathfrak{b}_1 + \mathfrak{b}_2)^c\).
    \end{proof}
  \end{enumerate}
\end{exr}

\begin{exr}
  Let \(\varphi: A \longrightarrow B\) be a ring homomorphism, \(\mathfrak{a}\) an ideal of \(A\), and \(\mathfrak{b}\) an ideal of \(B\). Prove the following statements:
  \begin{enumerate}
    \item Then \(\mathfrak{a} \subseteq \mathfrak{a}^{ec}\).
    \begin{proof}
      It is
      \begin{align}
        \mathfrak{a}^{ec} = & \makeset{x \in A}{\varphi(x) \in \mathfrak{a}^e} \\
        = & \makeset{x \in A}{\varphi(x) \in \langle \varphi(\mathfrak{a}) \rangle} \\
        = & \makeset{x \in A}{\forall i \in I \, \exists a_i \in \mathfrak{a}_1 : \varphi(x) = \sum_{i \in I} \lambda_i \varphi(a_i)} \text{.}
      \end{align}
      Let \(a \in \mathfrak{a}\) and choose \(I = \set{1}\), \(\lambda_1\), and \(a_i = a\), then \(a \in \mathfrak{a}^{ec}\).
    \end{proof}
    \item \(\mathfrak{b}^{ce} \subseteq \mathfrak{b}\).
    \item \(\mathfrak{a}^{ece} = \mathfrak{a}^e\).
    \item \(\mathfrak{b}^{cec} = \mathfrak{b}^c\).
    \item If \(\mathfrak{b}\) is an extension, then \(\mathfrak{b}^c\) is the largest ideal of \(A\) with extension \(\mathfrak{b}\).
    \item If two extensions have the same contraction, then they are equal.
    \begin{proof}
      a
    \end{proof}
  \end{enumerate}
\end{exr}

\begin{exr}
  Let \(A\) be a ring, \(A[\mathcal{X}, \mathcal{Y}]\) the polynomial ring in two sets of variables \(\mathcal{X}\) and \(\mathcal{Y}\). Show that \(\langle \mathcal{X} \rangle\) is prime if and only if \(A\) is a domain.
\end{exr}
\begin{proof}
  It should be noted here, that \(A[\mathcal{X}]\) does not contain \(X_1 X_2\) for example. It does contain \(X_1 + X_2\) however. The rest is easy.
\end{proof}
\begin{exr}
  Show that, in a PID, nonzero elements \(x\) and \(y\) are relatively prime (share no prime factor) if and only if they're coprime.
\end{exr}


\end{document}