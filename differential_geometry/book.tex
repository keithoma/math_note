\documentclass{book}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}

\usepackage{mathtools}

\usepackage{amsmath}

\usepackage{amssymb}

\usepackage[shortlabels]{enumitem}

% page layout
\usepackage{geometry}
 \geometry{
 a4paper,
 total={170mm,257mm},
 left=20mm,
 top=20mm,
 }

% theorems
\usepackage{amsthm}

\newtheoremstyle{custom_definition}% name of the style to be used
  {\topsep} % measure of space to leave above the theorem. E.g.: 3pt
  {\topsep} % measure of space to leave below the theorem. E.g.: 3pt
  {\normalfont} % name of font to use in the body of the theorem
  {} % measure of space to indent
  {\bfseries} % name of head font
  {.\newline} % punctuation between head and body
  {\topsep}% space after theorem head; " " = normal interword space
  {\thmname{#1}\thmnumber{ #2} --- \thmnote{#3}} % Manually specify head

  \newtheoremstyle{custom_theorem}% name of the style to be used
  {\topsep} % measure of space to leave above the theorem. E.g.: 3pt
  {\topsep} % measure of space to leave below the theorem. E.g.: 3pt
  {\itshape} % name of font to use in the body of the theorem
  {} % measure of space to indent
  {\bfseries} % name of head font
  {.\newline} % punctuation between head and body
  {\topsep}% space after theorem head; " " = normal interword space
  {\thmname{#1}\thmnumber{ #2} --- \thmnote{#3}} % Manually specify head

\theoremstyle{custom_definition}
\newtheorem{definition}{Definition}
\newtheorem{exercise}{Exercise}
\newtheorem{example}{Example}

\theoremstyle{custom_theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}


\newcommand{\bigslant}[2]{{\raisebox{.2em}{$#1$}\left/\raisebox{-.2em}{$#2$}\right.}}

\usepackage[lastexercise]{exercise}

\begin{document}
    \begin{definition}[Chart]
        An \(n\)-dimensional chart \((\mathcal{U}, x)\) on a set \(M\) consists of a subset \(\mathcal{U \subseteq M}\) and an injective map \(x: \mathcal{U} \longrightarrow \mathbb{R}^n\) whose image \(x(\mathcal{U}) \subseteq \mathbb{R}^n\) is an open set.
    \end{definition}
    \begin{definition}[Transition Maps]
        Any two charts \((\mathcal{U}, x)\) and \((\mathcal{V}, y)\) determine a pair of transition maps
        \begin{align}
            x(\mathcal{U} \cap \mathcal{V}) \xrightarrow{y \circ x^{-1}} y(\mathcal{U} \cap \mathcal{V}) \\
            y(\mathcal{U} \cap \mathcal{V}) \xrightarrow{x \circ y^{-1}} x(\mathcal{U} \cap \mathcal{V})
        \end{align}
        which are inverse to each other, and are thus bijections between subset of \(\mathbb{R}^n\).
    \end{definition}
    \begin{definition}[\(C^k\)-compatible]
        We say that the two charts are \(C^k\)-compatible for some \(k \in \mathbb{N} \cup \{0, \infty\}\) if the sets \(x(\mathcal{U} \cap \mathcal{V})\) and \(y(\mathcal{U} \cap \mathcal{V})\) are both open and the transition maps \(y \circ x^{-1}\) and \(x \circ y^{-1}\) are both of class \(C^k\). If \(k = \infty\), we say the charts are smoothly compatible.
    \end{definition}
    \begin{definition}[Atlas]
        An atlas of class \(C^k\) for the set \(M\) (or smooth atlas in the case \(k = \infty\)) is a collection of charts \(\mathcal{A} = \{(\mathcal{U}_\alpha, x_\alpha)\}_{\alpha \in I}\) that are all \(C^k\)-compatible with each other, such that \(\bigcup_{\alpha \in I} \mathcal{U} = M\).
    \end{definition}
    \begin{definition}
        For a set \(M\) with an atlas \(\mathcal{A}\) of class \(C^k\) and \(r \in \mathbb{N} \cup \{0, \infty\}\) with \(r \leq k\), a function \(f: M \longrightarrow \mathbb{R}\) is said to be of class \(C^k\) if and only if the function
        \begin{align}
            f \circ x^{-1}: x(\mathcal{U}) \longrightarrow \mathbb{R}
        \end{align}
        is of class \(C^r\) for every chart \((\mathcal{U}, x) \in \mathcal{A}\).
    \end{definition}
    \begin{definition}
        For \(k \in \mathbb{N} \cap \{\infty\}\), a \(C^k\)-structure or differentiable structure of class \(C^k\) on a set \(M\) is a maximal atlas \(\mathcal{A}\) of class \(C^k\) on \(M\). In the case \(k = \infty\), we also call this a smooth structure on \(M\). If \(M\) has been endowed with a \(C^k\)-structure \(\mathcal{A}\), then a chart \((\mathcal{U}, x)\) on \(M\) will be referred to as a \(C^k\)-chart if it belongs to the maximal atlas \(\mathcal{A}\).
    \end{definition}
    \begin{definition}[Topology]
        A topology on a set \(X\) is a collection \(\mathcal{T}\) of subsets of \(X\) satisfying the following axioms:
        \begin{enumerate}
            \item \(\emptyset \in \mathcal{T}\) and \(X \in \mathcal{T}\).
            \item For every subcollection \(I \subseteq \mathcal{T}\) it is \(\bigcup_{\mathcal{U} \in I} \mathcal{U} \in \mathcal{T}\).
            \item For every pair \(\mathcal{U}_1, \mathcal{U}_2 \in \mathcal{T}\) it is \(\mathcal{U}_1 \cap \mathcal{U}_2 \in \mathcal{T}\).
        \end{enumerate}
        The pair \((X, \mathcal{T})\) is then called a topological space, and we call the sets \(\mathcal{U} \in \mathcal{T}\) the open subsets in \((X, \mathcal{T})\).
    \end{definition}
    \begin{definition}[Metrizable]
        
    \end{definition}
    \begin{definition}[]
        Assume \(k \in \mathbb{N} \cup \{\infty\}\). A differentiable manifold of class \(C^k\) or \(C^k\)-manifold is a set \(M\) endowed with a \(C^k\)-structure such that the induced topology on \(M\) is metrizable and separable. In the case \(k = \infty\), we also call \(M\) are smooth manifold.

        We say that \(M\) is \(n\)-dimensional and refer to \(M\) as an \(n\)-manifold, written \(\text{dim}\, M = n\), if every chart in its differentiable structure is \(n\)-dimensional.
    \end{definition}

    \begin{exercise}
        Let \(S^2 \in \mathbb{R}^3\) be the three dimensional unit sphere and set \(p_{\pm} := (0, 0, \pm 1) \in S^2\). Find two subsets \(\mathcal{U}_1, \mathcal{U}_2 \subset S^2\) with \(\mathcal{U}_1 \cup \mathcal{U}_2 = S^2 \setminus \{p_+, p_-\}\) such that for \(i = 1, 2\),
        \begin{enumerate}[a)]
            \item there are 2-dimensional charts of the form \((\mathcal{U}_i, \alpha_i)\) with \(\alpha_i = (\theta_i, \phi_i)\), where the coordinate functions \(\theta_i, \phi_i: \mathcal{U}_i \longrightarrow \mathbb{R}\) are
            \begin{enumerate}[i)]
                \item continuous
                \item and satisfy the spherical coordinate relations,
            \end{enumerate}
            \item and have images
            \begin{align}
                \alpha_1(\mathcal{U}_1) = (0, 2 \pi) \times (-\frac{\pi}{2}, \frac{\pi}{2}) \subset \mathbb{R}^3 \quad \text{and} \quad \alpha_2(\mathcal{U}_2) = (-\pi, \pi) \times (-\frac{\pi}{2}, \frac{\pi}{2}) \subset \mathbb{R}^3 \text{.}
            \end{align}
        \end{enumerate}
    \end{exercise}
    \begin{proof} % not done
        \begin{align}
            \beta_1:& (0, 2 \pi) \times \left(-\frac{\pi}{2}, \frac{\pi}{2}\right) \longrightarrow \mathbb{R}^3 \\
            \beta_2:& (-\pi, \pi) \times \left(-\frac{\pi}{2}, \frac{\pi}{2}\right) \longrightarrow \mathbb{R}^3
        \end{align}
    \end{proof}
    \begin{exercise}
        For \(j = 0, \ldots, n\), define \(\mathcal{U}_j := \{[x_0 : \ldots : x_n] \in \mathbb{R}\mathbb{P}^n \mid x_j \neq 0\}\) and a map \(\varphi_j : \mathbb{R}^n \longrightarrow \mathbb{R}\mathbb{P}^n\) by
        \begin{align}
            \varphi_j (t_1, \ldots, t_n) := [t_1 : \ldots : t_j : 1 : t_{j+1} : \ldots : t_n] \text{.}
        \end{align}
        Show that \(\varphi_j\) is an injective map onto \(\mathcal{U}_j\), so \((\mathcal{U}_j, \varphi_j^{-1})\) is a chart, and compute the transition maps relating any two of the charts constructed in this way for different values of \(j = 0, \ldots, n\).
    \end{exercise}
    \begin{proof}
        We begin by showing \(\varphi_j\) is injective. It is for some \(\lambda \in \mathbb{R}\)
        \begin{align}
            \varphi(t_1, \ldots, t_n) = \varphi(t_1^\prime, \ldots, t_n^\prime) \iff & [t_1 : \ldots : t_j : 1 : t_{j+1} : \ldots : t_n] = [t_1^\prime : \ldots : t_j^\prime : 1 : t_{j+1}^\prime : \ldots : t_n] \\
            \iff & [t_1 : \ldots : t_j : 1 : t_{j+1} : \ldots : t_n] = \lambda [t_1^\prime : \ldots : t_j^\prime : 1 : t_{j+1}^\prime : \ldots : t_n] \text{,}
        \end{align}
        so we have \(\lambda = 1\). This means \((t_1, \ldots, t_n) = (t_1^\prime, \ldots, t_n^\prime)\) and \(\varphi_j\) is injective.

        \(\varphi_j^{-1}(\mathcal{U}_j)\) is an open set. To show this, I think, we first have that \(\varphi_j(\mathbb{R}^n) = \mathcal{U}_j\) which is open because \(\varphi_j\) is continuous and injective. Therefore, the image of the inverse function is also open. We might have to check that is continuous, probably use the local inverse function theorem.

        Transition maps. Consider \((\mathcal{U}_j, \varphi_j^{-1})\) and \((\mathcal{U}_k, \varphi_k^{-1})\) for \(k < j\). We have
        \begin{align}
            \varphi_k^{-1} \circ \varphi_j : \varphi_j^{-1}(\mathcal{U}_k \cap \mathcal{U}_j) \longrightarrow \varphi_k^{-1} (\mathcal{U}_k \cap \mathcal{U}_j)
        \end{align}
    \end{proof}
    \begin{exercise}
        Sheet 1 Problem 3
    \end{exercise}
    \begin{exercise}
        Consider the two 1-dimensional charts \((\mathcal{U}, x)\) and \((\mathcal{V}, y)\) on \(\mathbb{R}\) defined by \(\mathcal{U} = \mathcal{V} := \mathbb{R}\), with \(x(t) := t\) and \(y(t) := t^3\).
        \begin{enumerate}
            \item Show that \((\mathcal{U}, x)\) and \((\mathcal{V}, y)\) are \(C^0\)-compatible, but not \(C^1\)-compatible.
        \end{enumerate}
    \end{exercise}
    \begin{proof}
        1.
        
        Two charts \((\mathcal{U}, x)\) and \((\mathcal{V}, y)\) are \(C^0\)-compatible if the sets \(x(\mathcal{U} \cap \mathcal{V})\) and \(y(\mathcal{U} \cap \mathcal{V})\) are both open and the transition maps \(y \circ x^{-1}\) and \(x \circ y^{-1}\) are both of class \(C^0\). First, we have \(\mathcal{U} = \mathcal{V} = \mathbb{R}\), therefore
        \begin{align}
            x(\mathcal{U} \cap \mathcal{V}) = x(\mathbb{R}) = \mathbb{R} \\
            y(\mathcal{U} \cap \mathcal{V}) = y(\mathbb{R}) = \mathbb{R}
        \end{align}
        which are both open sets. Now consider the transition maps \(y \circ x^{-1}: \mathbb{R} \longrightarrow \mathbb{R}\) and \(x \circ y^{-1}: \mathbb{R} \longrightarrow \mathbb{R}\). It is
        \begin{align}
            \left( y \circ x^{-1} \right) (t) = y(x) = t^3 \\
            \left( x \circ y^{-1} \right) (t) = x(\sqrt[3]{t}) = \sqrt[3]{t}
        \end{align}
        which are both continuous functions.

        On the other hand, \(x \circ y^{-1}\) is not of class \(C^1\), because
        \begin{align}
            (x \circ y^{-1})^\prime (t) = \frac{1}{3t^{\frac{2}{3}}}
        \end{align}
        is not continuous.
    \end{proof}
\end{document}


